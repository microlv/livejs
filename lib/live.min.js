!function(e,n,t){"use strict";"undefined"!=typeof module&&"undefined"!==module.exports?module.exports=n(t):"function"==typeof define&&"object"===define.amd?define([],n):e.$l=n(t)}("object"==typeof window?window:this,function(e){"use strict";function n(e){return"function"==typeof e}function t(e){return this instanceof t?(this.defer=new c(this),this.fail=function(){},r(this,e),void f(this)):new t(e)}function r(e,n,t){var r=u(e,n,t);e.defer.queue.push(r)}function i(e){self.fail=e}function f(e,n,t){var r,i=0,f=e.defer.current,o=e.defer.queue;return f?(i=o.indexOf(f),f=e.defer.current=o[++i],void(f&&(r=("resolve"===n?f.fn:f.err)||function(e){e.resolve()},d(function(){r(t)})))):(f=e.defer.current=o[0],void d(function(){f.fn(t)}))}function o(e,n){e.fail(n)}function u(e,n,t){function r(n){var t=!1;return function(r){if(!t){t=!0,n=n||function(e){e.resolve()};try{n.call(e,e.defer,r)}catch(i){o(i)}}}}return{fn:r(n),err:r(t)}}function c(n){this.current=e,this.queue=[],this.$$parent=n}function s(e){for(var n=1,t=arguments.length;t>n;n++){var r=arguments[n];if(r)for(var i=Object.keys(r),f=0,o=i.length;o>f;f++){var u=i[f];e[u]=r[u]}}return e}function a(e){return e instanceof t?e:new t}function l(e,n){var t=a(this);return n=n||function(){},r(t,e),r(t,n),t}var h;h="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick:setTimeout;var d=function(e,n){h(e,n||0)},v=Array.isArray;t.fn=t.prototype={constructor:t,then:function(e,n){return r(this,e,n),this}},c.prototype={resolve:function(e){f(this.$$parent,"resolve",e)},reject:function(e){f(this.$$parent,"reject",e)}};var p=function(e,n){if(e.forEach)return e.forEach(n);for(var t=0;t<e.length;t++)n(e[t],t,e)},y=function(e,n){var t=a(this);if(v(e)){if(!e.length)return r(t,n);for(var i=0;i<e.length;i++)r(t,e[i])}else r(t,e);return r(t,n),t};return t.series=function(e,n){return y.call(this,e,n)},t.parallel=function(e,t){var r=[],i=this;return l.call(i,function(t){p(e,function(e){n(e)&&r.push(e.call(i))}),t.resolve(r)},t)},t.each=function(e,n,t){var r=[];return l.call(this,function(t){p(e,function(e){n(e)}),t.resolve(r)},t)},t.fail=function(e){return i(this,e)},s(t.fn,{series:t.series,parallel:t.parallel,each:t.each,forEach:t.each,extend:s}),t});