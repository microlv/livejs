!function(e,n,t){"use strict";"undefined"!=typeof module&&"undefined"!==module.exports?module.exports=n(t):"function"==typeof define&&"object"===define.amd?define(n):e.$l=n(t)}("object"==typeof window?window:this,function(e){"use strict";function n(e){return"function"==typeof e}function t(e){return this instanceof t?(this.defer=new f(this),r(this,e),void i(this)):new t(e)}function r(e,n,t){var r=o(e,n,t);e.defer.queue.push(r)}function i(e,n,t){var r,i=0,o=e.defer.current,f=e.defer.queue;return o?(i=f.indexOf(o),o=e.defer.current=f[++i],void(o&&(r=("resolve"===n?o.fn:o.err)||function(e){e.resolve()},l(function(){r(t)})))):(o=e.defer.current=f[0],void l(function(){o.fn(t)}))}function o(e,n,t){function r(n){var t=!1;return function(r){t||(t=!0,n=n||function(e){e.resolve()},n.call(e,e.defer,r))}}return{fn:r(n),err:r(t)}}function f(n){this.current=e,this.queue=[],this.$$parent=n}function u(e){for(var n=1,t=arguments.length;t>n;n++){var r=arguments[n];if(r)for(var i=Object.keys(r),o=0,f=i.length;f>o;o++){var u=i[o];e[u]=r[u]}}return e}function c(e){return e instanceof t?e:new t}var s,a=Array.isArray;s="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick:setTimeout;var l=function(e,n){s(e,n||0)};return t.fn=t.prototype={version:"1.1.5",constructor:t,then:function(e,n){return r(this,e,n),this},all:function(){}},f.prototype={resolve:function(e){i(this.$$parent,"resolve",e)},reject:function(e){i(this.$$parent,"reject",e)}},t.series=function(e,n){var t=c(this);if(a(e))for(var i=0;i<e.length;i++)r(t,e[i]);else r(t,e);return r(t,n),t},t.parallel=function(e,t){var i=c(this),o=[];return a(e)?r(i,function(){for(var r=0;r<e.length;r++)n(e[r])&&o.push(e[r].call(i));t.call(i,i.defer,o)}):n(e)&&t.call(i,e.call(i)),i},t.each=function(){},u(t.fn,{series:t.series,parallel:t.parallel,each:t.each,extend:u}),t});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpdmUuanMiXSwibmFtZXMiOlsicm9vdCIsImRlZmluaXRpb24iLCJ1bmRlZmluZWQiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmaW5lIiwiYW1kIiwiJGwiLCJ3aW5kb3ciLCJ0aGlzIiwiaXNGdW5jdGlvbiIsImZuIiwiTGl2ZWpzIiwicmVzb2x2ZSIsImRlZmVyIiwiRGVmZXIiLCJwcm9jZXNzUXVldWUiLCJuZXh0UHJvY2Vzc1F1ZXVlIiwic2VsZiIsInJlc292ZSIsInJlamVjdCIsImZucyIsIndyYXAiLCJxdWV1ZSIsInB1c2giLCJ0eXBlIiwidmFsIiwiaSIsImN1cnJlbnQiLCJxIiwiaW5kZXhPZiIsImVyciIsImQiLCJuZXh0VGljayIsImV4IiwiZXhlYyIsImNhbGwiLCIkJHBhcmVudCIsImV4dGVuZCIsImRzdCIsImlpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwib2JqIiwia2V5cyIsIk9iamVjdCIsImoiLCJqaiIsImtleSIsImNyZWF0ZUxpdmVqcyIsIl9zZXRJbW1lZGlhdGUiLCJpc0FycmF5IiwiQXJyYXkiLCJzZXRJbW1lZGlhdGUiLCJwcm9jZXNzIiwic2V0VGltZW91dCIsImNhbGxiYWNrIiwiZGVsYXkiLCJwcm90b3R5cGUiLCJ2ZXJzaW9uIiwiY29uc3RydWN0b3IiLCJ0aGVuIiwiYWxsIiwic2VyaWVzIiwicGFyYWxsZWwiLCJyIiwiZWFjaCJdLCJtYXBwaW5ncyI6IkNBUUEsU0FBV0EsRUFBTUMsRUFBWUMsR0FDekIsWUFFc0Isb0JBQVhDLFNBQTZDLGNBQW5CQSxPQUFPQyxRQUN4Q0QsT0FBT0MsUUFBVUgsRUFBV0MsR0FFTCxrQkFBWEcsU0FBd0MsV0FBZkEsT0FBT0MsSUFDNUNELE9BQU9KLEdBR1BELEVBQUtPLEdBQUtOLEVBQVdDLElBR1IsZ0JBQVhNLFFBQXNCQSxPQUFTQyxLQUFNLFNBQVVQLEdBQ3JELFlBZUEsU0FBU1EsR0FBV0MsR0FDaEIsTUFBcUIsa0JBQVBBLEdBR2xCLFFBQVNDLEdBQU9DLEdBQ1osTUFBTUosZ0JBQWdCRyxJQUd0QkgsS0FBS0ssTUFBUSxHQUFJQyxHQUFNTixNQUN2Qk8sRUFBYVAsS0FBTUksT0FDbkJJLEdBQWlCUixPQUpOLEdBQUlHLEdBQU9DLEdBbUIxQixRQUFTRyxHQUFhRSxFQUFNQyxFQUFRQyxHQUNoQyxHQUFJQyxHQUFNQyxFQUFLSixFQUFNQyxFQUFRQyxFQUM3QkYsR0FBS0osTUFBTVMsTUFBTUMsS0FBS0gsR0FHMUIsUUFBU0osR0FBaUJDLEVBQU1PLEVBQU1DLEdBQ2xDLEdBQ0lmLEdBREFnQixFQUFJLEVBRUpDLEVBQVVWLEVBQUtKLE1BQU1jLFFBQ3JCQyxFQUFJWCxFQUFLSixNQUFNUyxLQUNuQixPQUFLSyxJQU9MRCxFQUFJRSxFQUFFQyxRQUFRRixHQUNkQSxFQUFVVixFQUFLSixNQUFNYyxRQUFVQyxJQUFJRixRQUM5QkMsSUFHTGpCLEdBQWUsWUFBVGMsRUFBcUJHLEVBQVFqQixHQUFLaUIsRUFBUUcsTUFBUSxTQUFVQyxHQUM5REEsRUFBRW5CLFdBRU5vQixFQUFTLFdBQ0x0QixFQUFHZSxTQWZIRSxFQUFVVixFQUFLSixNQUFNYyxRQUFVQyxFQUFFLE9BQ2pDSSxHQUFTLFdBQ0xMLEVBQVFqQixHQUFHZSxNQWlCdkIsUUFBU0osR0FBS0osRUFBTUwsRUFBU08sR0FDekIsUUFBU2MsR0FBR3ZCLEdBQ1IsR0FBSXdCLElBQU8sQ0FDWCxPQUFPLFVBQVVULEdBQ1RTLElBR0pBLEdBQU8sRUFDUHhCLEVBQUtBLEdBQU0sU0FBVXFCLEdBQ2pCQSxFQUFFbkIsV0FFTkYsRUFBR3lCLEtBQUtsQixFQUFNQSxFQUFLSixNQUFPWSxLQUlsQyxPQUFRZixHQUFJdUIsRUFBR3JCLEdBQVVrQixJQUFLRyxFQUFHZCxJQUdyQyxRQUFTTCxHQUFNRyxHQUNYVCxLQUFLbUIsUUFBVTFCLEVBQ2ZPLEtBQUtjLFNBQ0xkLEtBQUs0QixTQUFXbkIsRUFpQnBCLFFBQVNvQixHQUFPQyxHQUNaLElBQUssR0FBSVosR0FBSSxFQUFHYSxFQUFLQyxVQUFVQyxPQUFZRixFQUFKYixFQUFRQSxJQUFLLENBQ2hELEdBQUlnQixHQUFNRixVQUFVZCxFQUNwQixJQUFJZ0IsRUFFQSxJQUFLLEdBRERDLEdBQU9DLE9BQU9ELEtBQUtELEdBQ2RHLEVBQUksRUFBR0MsRUFBS0gsRUFBS0YsT0FBWUssRUFBSkQsRUFBUUEsSUFBSyxDQUMzQyxHQUFJRSxHQUFNSixFQUFLRSxFQUNmUCxHQUFJUyxHQUFPTCxFQUFJSyxJQUkzQixNQUFPVCxHQUdYLFFBQVNVLEdBQWEvQixHQUNsQixNQUFRQSxhQUFnQk4sR0FBVU0sRUFBTyxHQUFJTixHQXpIakQsR0FDSXNDLEdBREFDLEVBQVVDLE1BQU1ELE9BR2hCRCxHQUR3QixrQkFBakJHLGNBQ1NBLGFBQ1UsbUJBQVpDLFVBQXVELGtCQUFyQkEsU0FBUXJCLFNBQ3hDcUIsUUFBUXJCLFNBRVJzQixVQUVwQixJQUFJdEIsR0FBVyxTQUFVdUIsRUFBVUMsR0FDL0JQLEVBQWNNLEVBQVVDLEdBQVMsR0E4SnJDLE9BOUlBN0MsR0FBT0QsR0FBS0MsRUFBTzhDLFdBQ2ZDLFFBQVMsUUFDVEMsWUFBYWhELEVBQ2JpRCxLQUFNLFNBQVVoRCxFQUFTTyxHQUVyQixNQURBSixHQUFhUCxLQUFNSSxFQUFTTyxHQUNyQlgsTUFFWHFELElBQUssY0EyRFQvQyxFQUFNMkMsV0FDRjdDLFFBQVMsU0FBVWEsR0FDZlQsRUFBaUJSLEtBQUs0QixTQUFVLFVBQVdYLElBRS9DTixPQUFRLFNBQVVNLEdBQ2RULEVBQWlCUixLQUFLNEIsU0FBVSxTQUFVWCxLQTJCbERkLEVBQU9tRCxPQUFTLFNBQVVwRCxFQUFJNkMsR0FDMUIsR0FBSTNCLEdBQUlvQixFQUFheEMsS0FDckIsSUFBSTBDLEVBQVF4QyxHQUNSLElBQUssR0FBSWdCLEdBQUksRUFBR0EsRUFBSWhCLEVBQUcrQixPQUFRZixJQUMzQlgsRUFBYWEsRUFBR2xCLEVBQUdnQixRQUd2QlgsR0FBYWEsRUFBR2xCLEVBR3BCLE9BREFLLEdBQWFhLEVBQUcyQixHQUNUM0IsR0FHWGpCLEVBQU9vRCxTQUFXLFNBQVVyRCxFQUFJNkMsR0FDNUIsR0FBSTNCLEdBQUlvQixFQUFheEMsTUFDakJ3RCxJQWVKLE9BZElkLEdBQVF4QyxHQUNSSyxFQUFhYSxFQUFHLFdBQ1osSUFBSyxHQUFJRixHQUFJLEVBQUdBLEVBQUloQixFQUFHK0IsT0FBUWYsSUFDdkJqQixFQUFXQyxFQUFHZ0IsS0FDZHNDLEVBQUV6QyxLQUFLYixFQUFHZ0IsR0FBR1MsS0FBS1AsR0FHMUIyQixHQUFTcEIsS0FBS1AsRUFBR0EsRUFBRWYsTUFBT21ELEtBRzFCdkQsRUFBV0MsSUFDWDZDLEVBQVNwQixLQUFLUCxFQUFHbEIsRUFBR3lCLEtBQUtQLElBRzFCQSxHQUdYakIsRUFBT3NELEtBQU8sYUFJZDVCLEVBQU8xQixFQUFPRCxJQUNWb0QsT0FBUW5ELEVBQU9tRCxPQUNmQyxTQUFVcEQsRUFBT29ELFNBQ2pCRSxLQUFNdEQsRUFBT3NELEtBQ2I1QixPQUFRQSxJQUdMMUIiLCJmaWxlIjoibGl2ZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogJGwgLSBhbmR5Lmx2XHJcbiAqIChDKSAyMDE0IC0gQW5keS5MdlxyXG4gKiBMaWNlbnNlOiBNSVRcclxuICogU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vbWljcm9sdi9MaXZlanMvXHJcbiAqIERlc2NyaXB0aW9uOiBwb3dlcmZ1bCBwcm9taXNlIGxpYnJhcnkuIHNpbXBsZSBhbmQgZmFzdGVyIVxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAocm9vdCwgZGVmaW5pdGlvbiwgdW5kZWZpbmVkKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZGVmaW5pdGlvbih1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGRlZmluZShkZWZpbml0aW9uKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJvb3QuJGwgPSBkZWZpbml0aW9uKHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcblxyXG59KSh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uICh1bmRlZmluZWQpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XHJcbiAgICB2YXIgX3NldEltbWVkaWF0ZTtcclxuICAgIGlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgX3NldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzLm5leHRUaWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgX3NldEltbWVkaWF0ZSA9IHByb2Nlc3MubmV4dFRpY2s7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIF9zZXRJbW1lZGlhdGUgPSBzZXRUaW1lb3V0O1xyXG4gICAgfVxyXG4gICAgdmFyIG5leHRUaWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBkZWxheSkge1xyXG4gICAgICAgIF9zZXRJbW1lZGlhdGUoY2FsbGJhY2ssIGRlbGF5IHx8IDApO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBMaXZlanMocmVzb2x2ZSkge1xyXG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBMaXZlanMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGl2ZWpzKHJlc29sdmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRlZmVyID0gbmV3IERlZmVyKHRoaXMpO1xyXG4gICAgICAgIHByb2Nlc3NRdWV1ZSh0aGlzLCByZXNvbHZlKTtcclxuICAgICAgICBuZXh0UHJvY2Vzc1F1ZXVlKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIExpdmVqcy5mbiA9IExpdmVqcy5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgdmVyc2lvbjogJzEuMS41JyxcclxuICAgICAgICBjb25zdHJ1Y3RvcjogTGl2ZWpzLFxyXG4gICAgICAgIHRoZW46IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgcHJvY2Vzc1F1ZXVlKHRoaXMsIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWxsOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKHNlbGYsIHJlc292ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgdmFyIGZucyA9IHdyYXAoc2VsZiwgcmVzb3ZlLCByZWplY3QpO1xyXG4gICAgICAgIHNlbGYuZGVmZXIucXVldWUucHVzaChmbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG5leHRQcm9jZXNzUXVldWUoc2VsZiwgdHlwZSwgdmFsKSB7XHJcbiAgICAgICAgdmFyIGkgPSAwLFxyXG4gICAgICAgICAgICBmbixcclxuICAgICAgICAgICAgY3VycmVudCA9IHNlbGYuZGVmZXIuY3VycmVudCxcclxuICAgICAgICAgICAgcSA9IHNlbGYuZGVmZXIucXVldWU7XHJcbiAgICAgICAgaWYgKCFjdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBzZWxmLmRlZmVyLmN1cnJlbnQgPSBxWzBdO1xyXG4gICAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50LmZuKHZhbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGkgPSBxLmluZGV4T2YoY3VycmVudCk7XHJcbiAgICAgICAgY3VycmVudCA9IHNlbGYuZGVmZXIuY3VycmVudCA9IHFbKytpXTtcclxuICAgICAgICBpZiAoIWN1cnJlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmbiA9ICh0eXBlID09PSAncmVzb2x2ZScgPyBjdXJyZW50LmZuIDogY3VycmVudC5lcnIpIHx8IGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgIGQucmVzb2x2ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmbih2YWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHdyYXAoc2VsZiwgcmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZXgoZm4pIHtcclxuICAgICAgICAgICAgdmFyIGV4ZWMgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChleGVjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXhlYyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmbiA9IGZuIHx8IGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZm4uY2FsbChzZWxmLCBzZWxmLmRlZmVyLCB2YWwpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtmbjogZXgocmVzb2x2ZSksIGVycjogZXgocmVqZWN0KX07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gRGVmZXIoc2VsZikge1xyXG4gICAgICAgIHRoaXMuY3VycmVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gW107XHJcbiAgICAgICAgdGhpcy4kJHBhcmVudCA9IHNlbGY7XHJcbiAgICB9XHJcblxyXG4gICAgRGVmZXIucHJvdG90eXBlID0ge1xyXG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgbmV4dFByb2Nlc3NRdWV1ZSh0aGlzLiQkcGFyZW50LCAncmVzb2x2ZScsIHZhbCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWplY3Q6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgbmV4dFByb2Nlc3NRdWV1ZSh0aGlzLiQkcGFyZW50LCAncmVqZWN0JywgdmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZXh0ZW5kIHRoZSBvYmplY3QsZHN0IGlzIHRoZSByZXR1cm4gdmFsdWVcclxuICAgICAqIEBwYXJhbSBkc3RcclxuICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBleHRlbmQoZHN0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDEsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0ga2V5cy5sZW5ndGg7IGogPCBqajsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgZHN0W2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZHN0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxpdmVqcyhzZWxmKSB7XHJcbiAgICAgICAgcmV0dXJuIChzZWxmIGluc3RhbmNlb2YgTGl2ZWpzKSA/IHNlbGYgOiBuZXcgTGl2ZWpzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgTGl2ZWpzLnNlcmllcyA9IGZ1bmN0aW9uIChmbiwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgcSA9IGNyZWF0ZUxpdmVqcyh0aGlzKTtcclxuICAgICAgICBpZiAoaXNBcnJheShmbikpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc1F1ZXVlKHEsIGZuW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHByb2Nlc3NRdWV1ZShxLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb2Nlc3NRdWV1ZShxLCBjYWxsYmFjayk7XHJcbiAgICAgICAgcmV0dXJuIHE7XHJcbiAgICB9O1xyXG5cclxuICAgIExpdmVqcy5wYXJhbGxlbCA9IGZ1bmN0aW9uIChmbiwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgcSA9IGNyZWF0ZUxpdmVqcyh0aGlzKTtcclxuICAgICAgICB2YXIgciA9IFtdO1xyXG4gICAgICAgIGlmIChpc0FycmF5KGZuKSkge1xyXG4gICAgICAgICAgICBwcm9jZXNzUXVldWUocSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByLnB1c2goZm5baV0uY2FsbChxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChxLCBxLmRlZmVyLCByKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHEsIGZuLmNhbGwocSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBxO1xyXG4gICAgfTtcclxuXHJcbiAgICBMaXZlanMuZWFjaCA9IGZ1bmN0aW9uIChwYXJhbXMsIGZuLCBjYWxsYmFjaykge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgZXh0ZW5kKExpdmVqcy5mbiwge1xyXG4gICAgICAgIHNlcmllczogTGl2ZWpzLnNlcmllcyxcclxuICAgICAgICBwYXJhbGxlbDogTGl2ZWpzLnBhcmFsbGVsLFxyXG4gICAgICAgIGVhY2g6IExpdmVqcy5lYWNoLFxyXG4gICAgICAgIGV4dGVuZDogZXh0ZW5kXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gTGl2ZWpzO1xyXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=