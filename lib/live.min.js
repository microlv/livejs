!function(n,e,t){"use strict";"undefined"!=typeof module&&"undefined"!==module.exports?module.exports=e(t):"function"==typeof define&&"object"===define.amd?define([],e):n.$l=e(t)}("object"==typeof window?window:this,function(n){"use strict";function e(n){return"function"==typeof n}function t(n){return this instanceof t?(this.defer=new u(this),this.fail=function(){},r(this,n),void o(this)):new t(n)}function r(n,e,t){var r=f(n,e,t);n.defer.queue.push(r)}function i(){}function o(n,e,t){var r,i=0,o=n.defer.current,f=n.defer.queue;return o?(i=f.indexOf(o),o=n.defer.current=f[++i],void(o&&(r=("resolve"===e?o.fn:o.err)||function(n){n.resolve()},h(function(){r(t)})))):(o=n.defer.current=f[0],void h(function(){o.fn(t)}))}function f(n,e,t){function r(e){var t=!1;return function(r){t||(t=!0,e=e||function(n){n.resolve()},e.call(n,n.defer,r))}}return{fn:r(e),err:r(t)}}function u(e){this.current=n,this.queue=[],this.$$parent=e}function c(n){for(var e=1,t=arguments.length;t>e;e++){var r=arguments[e];if(r)for(var i=Object.keys(r),o=0,f=i.length;f>o;o++){var u=i[o];n[u]=r[u]}}return n}function s(n){return n instanceof t?n:new t}function a(n,e){var t=s(this);return e=e||function(){},r(t,n),r(t,e),t}var l;l="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick:setTimeout;var h=function(n,e){l(n,e||0)},d=Array.isArray;t.fn=t.prototype={version:"1.1.5",constructor:t,then:function(n,e){return r(this,n,e),this},all:function(){}},u.prototype={resolve:function(n){o(this.$$parent,"resolve",n)},reject:function(n){o(this.$$parent,"reject",n)}};var v=function(n,e){if(n.forEach)return n.forEach(e);for(var t=0;t<n.length;t++)e(n[t],t,n)},p=function(n,e){var t=s(this);if(d(n)){if(!n.length)return r(t,e);for(var i=0;i<n.length;i++)r(t,n[i])}else r(t,n);return r(t,e),t};return t.series=function(n,e){return p.call(this,n,e)},t.parallel=function(n,t){var r=[],i=this;return a.call(i,function(t){v(n,function(n){e(n)&&r.push(n.call(i))}),t.resolve(r)},t)},t.each=function(n,e,t){var r=[];return a.call(this,function(t){v(n,function(n){e(n)}),t.resolve(r)},t)},t.fail=function(n){return i(this,n)},t["finally"]=function(){},c(t.fn,{series:t.series,parallel:t.parallel,each:t.each,forEach:t.each,extend:c}),t});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpdmUuanMiXSwibmFtZXMiOlsicm9vdCIsImRlZmluaXRpb24iLCJ1bmRlZmluZWQiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmaW5lIiwiYW1kIiwiJGwiLCJ3aW5kb3ciLCJ0aGlzIiwiaXNGdW5jdGlvbiIsImZuIiwiTGl2ZWpzIiwicmVzb2x2ZSIsImRlZmVyIiwiRGVmZXIiLCJmYWlsIiwicHJvY2Vzc1F1ZXVlIiwibmV4dFByb2Nlc3NRdWV1ZSIsInNlbGYiLCJyZXNvdmUiLCJyZWplY3QiLCJmbnMiLCJ3cmFwIiwicXVldWUiLCJwdXNoIiwicHJvY2Vzc0ZhaWxRdWV1ZSIsInR5cGUiLCJ2YWwiLCJpIiwiY3VycmVudCIsInEiLCJpbmRleE9mIiwiZXJyIiwiZCIsIm5leHRUaWNrIiwiZXgiLCJleGVjIiwiY2FsbCIsIiQkcGFyZW50IiwiZXh0ZW5kIiwiZHN0IiwiaWkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJvYmoiLCJrZXlzIiwiT2JqZWN0IiwiaiIsImpqIiwia2V5IiwiY3JlYXRlTGl2ZWpzIiwiZG9FYWNoIiwiZXhlY0ZuIiwiY2FsbGJhY2siLCJfc2V0SW1tZWRpYXRlIiwic2V0SW1tZWRpYXRlIiwicHJvY2VzcyIsInNldFRpbWVvdXQiLCJkZWxheSIsImlzQXJyYXkiLCJBcnJheSIsInByb3RvdHlwZSIsInZlcnNpb24iLCJjb25zdHJ1Y3RvciIsInRoZW4iLCJhbGwiLCJfZWFjaCIsImFyciIsImZvckVhY2giLCJfZWFjaEFyciIsInNlcmllcyIsInBhcmFsbGVsIiwiciIsInRoYXQiLCJrIiwiZWFjaCIsIml0ZXJhdG9yIl0sIm1hcHBpbmdzIjoiQ0FRQSxTQUFXQSxFQUFNQyxFQUFZQyxHQUN6QixZQUVzQixvQkFBWEMsU0FBNkMsY0FBbkJBLE9BQU9DLFFBQ3hDRCxPQUFPQyxRQUFVSCxFQUFXQyxHQUNILGtCQUFYRyxTQUF3QyxXQUFmQSxPQUFPQyxJQUM5Q0QsVUFBV0osR0FFWEQsRUFBS08sR0FBS04sRUFBV0MsSUFHUixn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QUdsQ0MsRUFBQUEsV0FBaUIsYUFJakI0QixFQUFPNUIsRUFBT0QsSUFDVjRELE9BQVEzRCxFQUFPMkQsT0FDZkMsU0FBVTVELEVBQU80RCxTQUNqQkksS0FBTWhFLEVBQU9nRSxLQUNiUCxRQUFTekQsRUFBT2dFLEtBQ2hCcEMsT0FBUUEsSUFHTDVCIiwiZmlsZSI6ImxpdmUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqICRsIC0gYW5keS5sdlxyXG4gKiAoQykgMjAxNCAtIEFuZHkuTHZcclxuICogTGljZW5zZTogTUlUXHJcbiAqIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL21pY3JvbHYvTGl2ZWpzL1xyXG4gKiBEZXNjcmlwdGlvbjogcG93ZXJmdWwgcHJvbWlzZSBsaWJyYXJ5LiBzaW1wbGUgYW5kIGZhc3RlciFcclxuICovXHJcblxyXG4oZnVuY3Rpb24gKHJvb3QsIGRlZmluaXRpb24sIHVuZGVmaW5lZCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGRlZmluaXRpb24odW5kZWZpbmVkKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGRlZmluZShbXSwgZGVmaW5pdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJvb3QuJGwgPSBkZWZpbml0aW9uKHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcblxyXG59KSh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uICh1bmRlZmluZWQpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgX3NldEltbWVkaWF0ZTtcclxuICAgIGlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgX3NldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzLm5leHRUaWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgX3NldEltbWVkaWF0ZSA9IHByb2Nlc3MubmV4dFRpY2s7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIF9zZXRJbW1lZGlhdGUgPSBzZXRUaW1lb3V0O1xyXG4gICAgfVxyXG4gICAgdmFyIG5leHRUaWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBkZWxheSkge1xyXG4gICAgICAgIF9zZXRJbW1lZGlhdGUoY2FsbGJhY2ssIGRlbGF5IHx8IDApO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XHJcblxyXG4gICAgZnVuY3Rpb24gaXNGdW5jdGlvbihmbikge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbic7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gTGl2ZWpzKHJlc29sdmUpIHtcclxuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgTGl2ZWpzKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IExpdmVqcyhyZXNvbHZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kZWZlciA9IG5ldyBEZWZlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmZhaWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwcm9jZXNzUXVldWUodGhpcywgcmVzb2x2ZSk7XHJcbiAgICAgICAgbmV4dFByb2Nlc3NRdWV1ZSh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBMaXZlanMuZm4gPSBMaXZlanMucHJvdG90eXBlID0ge1xyXG4gICAgICAgIHZlcnNpb246ICcxLjEuNScsXHJcbiAgICAgICAgY29uc3RydWN0b3I6IExpdmVqcyxcclxuICAgICAgICB0aGVuOiBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHByb2Nlc3NRdWV1ZSh0aGlzLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFsbDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHByb2Nlc3NRdWV1ZShzZWxmLCByZXNvdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHZhciBmbnMgPSB3cmFwKHNlbGYsIHJlc292ZSwgcmVqZWN0KTtcclxuICAgICAgICBzZWxmLmRlZmVyLnF1ZXVlLnB1c2goZm5zKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcm9jZXNzRmFpbFF1ZXVlKCkge1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG5leHRQcm9jZXNzUXVldWUoc2VsZiwgdHlwZSwgdmFsKSB7XHJcbiAgICAgICAgdmFyIGkgPSAwLFxyXG4gICAgICAgICAgICBmbixcclxuICAgICAgICAgICAgY3VycmVudCA9IHNlbGYuZGVmZXIuY3VycmVudCxcclxuICAgICAgICAgICAgcSA9IHNlbGYuZGVmZXIucXVldWU7XHJcbiAgICAgICAgaWYgKCFjdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBzZWxmLmRlZmVyLmN1cnJlbnQgPSBxWzBdO1xyXG4gICAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50LmZuKHZhbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGkgPSBxLmluZGV4T2YoY3VycmVudCk7XHJcbiAgICAgICAgY3VycmVudCA9IHNlbGYuZGVmZXIuY3VycmVudCA9IHFbKytpXTtcclxuICAgICAgICBpZiAoIWN1cnJlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmbiA9ICh0eXBlID09PSAncmVzb2x2ZScgPyBjdXJyZW50LmZuIDogY3VycmVudC5lcnIpIHx8IGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgIGQucmVzb2x2ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmbih2YWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHdyYXAoc2VsZiwgcmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZXgoZm4pIHtcclxuICAgICAgICAgICAgdmFyIGV4ZWMgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChleGVjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXhlYyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmbiA9IGZuIHx8IGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZm4uY2FsbChzZWxmLCBzZWxmLmRlZmVyLCB2YWwpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtmbjogZXgocmVzb2x2ZSksIGVycjogZXgocmVqZWN0KX07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gRGVmZXIoc2VsZikge1xyXG4gICAgICAgIHRoaXMuY3VycmVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gW107XHJcbiAgICAgICAgdGhpcy4kJHBhcmVudCA9IHNlbGY7XHJcbiAgICB9XHJcblxyXG4gICAgRGVmZXIucHJvdG90eXBlID0ge1xyXG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgbmV4dFByb2Nlc3NRdWV1ZSh0aGlzLiQkcGFyZW50LCAncmVzb2x2ZScsIHZhbCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWplY3Q6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgbmV4dFByb2Nlc3NRdWV1ZSh0aGlzLiQkcGFyZW50LCAncmVqZWN0JywgdmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZXh0ZW5kIHRoZSBvYmplY3QsZHN0IGlzIHRoZSByZXR1cm4gdmFsdWVcclxuICAgICAqIEBwYXJhbSBkc3RcclxuICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBleHRlbmQoZHN0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDEsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0ga2V5cy5sZW5ndGg7IGogPCBqajsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgZHN0W2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZHN0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxpdmVqcyhzZWxmKSB7XHJcbiAgICAgICAgcmV0dXJuIChzZWxmIGluc3RhbmNlb2YgTGl2ZWpzKSA/IHNlbGYgOiBuZXcgTGl2ZWpzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9lYWNoID0gZnVuY3Rpb24gKGFyciwgZm4pIHtcclxuICAgICAgICBpZiAoYXJyLmZvckVhY2gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyci5mb3JFYWNoKGZuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm4oYXJyW2ldLCBpLCBhcnIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIF9lYWNoQXJyID0gZnVuY3Rpb24gKGFyciwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgcSA9IGNyZWF0ZUxpdmVqcyh0aGlzKTtcclxuICAgICAgICBpZiAoaXNBcnJheShhcnIpKSB7XHJcbiAgICAgICAgICAgIGlmICghYXJyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NRdWV1ZShxLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NRdWV1ZShxLCBhcnJbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJvY2Vzc1F1ZXVlKHEsIGFycik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb2Nlc3NRdWV1ZShxLCBjYWxsYmFjayk7XHJcbiAgICAgICAgcmV0dXJuIHE7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGRvRWFjaChleGVjRm4sIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIHEgPSBjcmVhdGVMaXZlanModGhpcyk7XHJcbiAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwcm9jZXNzUXVldWUocSwgZXhlY0ZuKTtcclxuICAgICAgICBwcm9jZXNzUXVldWUocSwgY2FsbGJhY2spO1xyXG4gICAgICAgIHJldHVybiBxO1xyXG4gICAgfVxyXG5cclxuICAgIExpdmVqcy5zZXJpZXMgPSBmdW5jdGlvbiAoYXJyLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiBfZWFjaEFyci5jYWxsKHRoaXMsIGFyciwgY2FsbGJhY2spO1xyXG4gICAgfTtcclxuXHJcbiAgICBMaXZlanMucGFyYWxsZWwgPSBmdW5jdGlvbiAoYXJyLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciByID0gW10sIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBkb0VhY2guY2FsbCh0aGF0LCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICBfZWFjaChhcnIsIGZ1bmN0aW9uIChrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihrKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHIucHVzaChrLmNhbGwodGhhdCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZC5yZXNvbHZlKHIpO1xyXG4gICAgICAgIH0sIGNhbGxiYWNrKTtcclxuICAgIH07XHJcblxyXG4gICAgTGl2ZWpzLmVhY2ggPSBmdW5jdGlvbiAoYXJyLCBpdGVyYXRvciwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgciA9IFtdO1xyXG4gICAgICAgIHJldHVybiBkb0VhY2guY2FsbCh0aGlzLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICBfZWFjaChhcnIsIGZ1bmN0aW9uIChrKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVyYXRvcihrKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGQucmVzb2x2ZShyKTtcclxuICAgICAgICB9LCBjYWxsYmFjayk7XHJcbiAgICB9O1xyXG5cclxuICAgIExpdmVqcy5mYWlsID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb2Nlc3NGYWlsUXVldWUodGhpcywgZm4pO1xyXG4gICAgfTtcclxuXHJcbiAgICBMaXZlanMuZmluYWxseSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGV4dGVuZChMaXZlanMuZm4sIHtcclxuICAgICAgICBzZXJpZXM6IExpdmVqcy5zZXJpZXMsXHJcbiAgICAgICAgcGFyYWxsZWw6IExpdmVqcy5wYXJhbGxlbCxcclxuICAgICAgICBlYWNoOiBMaXZlanMuZWFjaCxcclxuICAgICAgICBmb3JFYWNoOiBMaXZlanMuZWFjaCxcclxuICAgICAgICBleHRlbmQ6IGV4dGVuZFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIExpdmVqcztcclxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9